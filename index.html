<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ðŸ’° Payments Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f9; margin:0; padding:20px; }
    h1 { text-align:center; color:#333; }
    .week { background:#fff; margin:15px auto; padding:15px; border-radius:12px; max-width:500px;
            box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .week h2 { margin:0 0 10px 0; font-size:1.2em; color:#444; }
    .bill { display:flex; justify-content:space-between; margin:6px 0; }
    .bill span { font-size:0.95em; }
    .progress { background:#ddd; border-radius:10px; height:12px; margin:10px 0; }
    .progress-bar { background:#7c5cff; height:100%; border-radius:10px; }
    .summary { font-size:0.9em; color:#555; margin-top:8px; }
    .toggle { margin-left:8px; }
  </style>
</head>
<body>
  <h1>ðŸ’° Payments Tracker v2</h1>
  <div id="weeks"></div>

<script>
// === Arizona Time Helper ===
function arizonaDate(iso) {
  const [y,m,d] = iso.split("-").map(Number);
  const date = new Date(Date.UTC(y, m-1, d));
  date.setUTCHours(date.getUTCHours() - 7);
  return date;
}

// === Paychecks + Bills ===
const PAYCHECKS = [
  { date: "2025-08-22", amount: 2017, bills: [
    {id:'kicks',name:'Kicks',amt:472,due:"2025-09-30"},
    {id:'progressive',name:'Progressive',amt:300,due:"2025-09-16"},
    {id:'rogue',name:'Rogue',amt:700,due:"2025-09-03"},
    {id:'fridge',name:'Fridge',amt:60,due:"2025-09-01"},
    {id:'penasco',name:'PeÃ±asco',amt:45,due:"2025-09-01"},
    {id:'vegas',name:'Vegas',amt:51,due:"2025-09-01"},
    {id:'amazon',name:'Amazon Prime',amt:50,due:"2025-09-08"},
  ]},
  { date: "2025-08-29", amount: 650, bills: [
    {id:'hawaiian',name:'Hawaiian Airlines',amt:65,due:"2025-09-16"},
    {id:'city',name:'City of Phoenix',amt:60,due:"2025-09-05"},
    {id:'chase',name:'Chase',amt:125,due:"2025-09-16"},
    {id:'frontier',name:'Frontier',amt:65,due:"2025-09-16"},
  ]},
  { date: "2025-09-05", amount: 2017, bills: [
    {id:'house',name:'House Payment',amt:950,due:"2025-09-29"},
    {id:'qs3064',name:'Quicksilver 3064',amt:100,due:"2025-09-12"},
    {id:'centurylink',name:'Century Link',amt:70,due:"2025-09-14"},
    {id:'tmobile',name:'T-Mobile',amt:368,due:"2025-09-16"},
    {id:'hoa',name:'HOA',amt:160,due:"2025-09-01"},
  ]},
  { date: "2025-09-12", amount: 650, bills: [
    {id:'walmart',name:'Walmart',amt:75,due:"2025-09-18"},
    {id:'qs5989',name:'Quicksilver 5989',amt:100,due:"2025-09-16"},
    {id:'capitalone',name:'Capital One',amt:189,due:"2025-09-11"},
  ]},
];

// === Build Weeks Data ===
function generateWeeks(paychecks) {
  return paychecks.map(p => {
    const spent = p.bills.reduce((sum,b) => sum+b.amt,0);
    const remaining = p.amount - spent;
    return { date: p.date, pay: p.amount, bills: p.bills, spent, remaining };
  });
}
const WEEKS = generateWeeks(PAYCHECKS);

// === Render ===
function renderWeeks() {
  const container = document.getElementById("weeks");
  container.innerHTML = "";

  WEEKS.forEach(week => {
    const weekDiv = document.createElement("div");
    weekDiv.className = "week";

    const dateObj = arizonaDate(week.date);
    const header = document.createElement("h2");
    header.textContent = `Payday: ${dateObj.toLocaleDateString("en-US",{timeZone:"America/Phoenix"})} â€” $${week.pay}`;
    weekDiv.appendChild(header);

    // Bills list
    week.bills.forEach(bill => {
      const billDiv = document.createElement("div");
      billDiv.className = "bill";

      const left = document.createElement("span");
      left.textContent = `${bill.name} ($${bill.amt})`;

      const right = document.createElement("span");
      const toggle = document.createElement("input");
      toggle.type = "checkbox";
      toggle.className = "toggle";
      toggle.dataset.id = bill.id;
      right.appendChild(toggle);

      billDiv.appendChild(left);
      billDiv.appendChild(right);
      weekDiv.appendChild(billDiv);
    });

    // Progress bar
    const progress = document.createElement("div");
    progress.className = "progress";
    const bar = document.createElement("div");
    bar.className = "progress-bar";
    bar.style.width = ((week.spent/week.pay)*100) + "%";
    progress.appendChild(bar);
    weekDiv.appendChild(progress);

    // Summary
    const summary = document.createElement("div");
    summary.className = "summary";
    summary.textContent = `Spent: $${week.spent} | Remaining: $${week.remaining}`;
    weekDiv.appendChild(summary);

    container.appendChild(weekDiv);
  });
}

renderWeeks();
</script>
</body>
</html>
